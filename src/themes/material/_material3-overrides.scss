// Material 3 Component Overrides for Angular 20
// This file contains all Material Design 3 component customizations
// Following Angular 20 and Material 3 best practices

// Import Windows Forms Tab Theme
@use 'tabs-theme';

// Form Field Overrides - Material 3 Balanced Design
.mat-mdc-form-field {
  // Base form field wrapper
  .mat-mdc-form-field-wrapper {
    padding-bottom: 0.25em !important;
  }
  
  // Input area (infix) - where the content sits
  .mat-mdc-form-field-infix {
    padding: 4px 0 !important; // Reduced padding for better proportions
    min-height: 24px !important; // Smaller min-height for balanced proportions
    display: flex !important;
    align-items: center !important; // Center content vertically
  }
  
  // Text field wrapper for input fields
  .mat-mdc-text-field-wrapper {
    height: var(--form-field-height-normal) !important; // Use consistent form field height
    display: flex !important;
    align-items: center !important; // Center the entire wrapper content
  }
  
  // Outlined form field specific styles
  &.mat-mdc-form-field-appearance-outline {
    .mat-mdc-form-field-outline-wrapper {
      height: var(--form-field-height-normal) !important; // Match text field wrapper
    }
    
    .mat-mdc-form-field-outline {
      .mat-mdc-form-field-outline-start,
      .mat-mdc-form-field-outline-notch,
      .mat-mdc-form-field-outline-end {
        border-width: var(--border-width-thin) !important;
      }
    }
  }
}

// Input Element Overrides - Material 3 Enhanced
.mat-mdc-input-element {
  height: var(--input-height) !important; // Use consistent input height
  font-size: var(--input-font-size) !important; // Use consistent input font size
  line-height: var(--input-line-height) !important; // Match height for perfect centering
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

// Select Component Overrides - Material 3
.mat-mdc-select {
  line-height: var(--input-line-height) !important; // Match input height
  font-size: var(--input-font-size) !important; // Match input font size
}

.mat-mdc-select-trigger {
  height: var(--input-height) !important; // Match input height
  display: flex !important;
  align-items: center !important;
}

.mat-mdc-select-value {
  line-height: var(--input-line-height) !important; // Match trigger height
  margin-top: 0 !important; // Remove offset since we're using flex centering
}

// Floating Label Overrides - Material 3 Enhanced Design
.mdc-floating-label {
  top: 5px !important; // Adjusted for enhanced field height
  font-size: var(--input-font-size) !important; // Match input font size
  line-height: 18px !important; // Better line height
}

.mdc-floating-label--float-above {
  transform: translateY(-75%) scale(0.75) !important; // Adjusted for enhanced field
}

// Better centering for empty field labels without affecting floated state
.mat-mdc-form-field:not(.mat-form-field-has-value):not(.mat-focused) {
  .mdc-floating-label {
    top: 8px !important; // Centered in 36px field
  }
}

// Button Overrides - Material 3 Enhanced Design
.mat-mdc-button,
.mat-mdc-outlined-button, 
.mat-mdc-raised-button,
.mat-mdc-unelevated-button,
.mat-mdc-fab,
.mat-mdc-mini-fab {
  height: 40px !important; // Increased for better proportion with larger fonts
  min-width: auto !important;
  font-size: 14px !important; // Increased from 13px for better readability
  font-weight: 500 !important; // Medium weight for better prominence
  
  // Material 3 button spacing
  .mat-mdc-button-touch-target {
    height: 40px !important;
  }
}

// Icon Button Overrides
.mat-mdc-icon-button {
  width: 40px !important; // Increased for better accessibility
  height: 40px !important;
  
  .mat-mdc-button-touch-target {
    width: 40px !important;
    height: 40px !important;
  }
  
  .mat-icon {
    font-size: 20px !important; // Increased for better visibility
    width: 20px !important;
    height: 20px !important;
  }
}

// Table Overrides - Material 3 Enhanced Design
.mat-mdc-table {
  // Enhanced table rows for better visual appeal
  .mat-mdc-row {
    height: 44px !important; // Reduced from 48px for more compact appearance
  }
  
  .mat-mdc-header-row {
    height: 48px !important; // Slightly reduced header height
  }
  
  // Enhanced table cells with better typography
  .mat-mdc-cell,
  .mat-mdc-header-cell {
    padding: 6px 12px !important; // Reduced padding from 8px 14px for more compact rows
    font-size: 15px !important; // Maintained larger font for readability
    line-height: 1.4 !important; // Better line height
  }
  
  // Header cells get bold weight for better hierarchy
  .mat-mdc-header-cell {
    font-weight: 600 !important; // Semibold for headers
    color: rgba(0, 0, 0, 0.87) !important; // Darker color for better contrast
  }
  
  // Data cells
  .mat-mdc-cell {
    color: rgba(0, 0, 0, 0.75) !important; // Good contrast for readability
  }
}

// Chip Overrides - Material 3 Design with Light, Gentle Colors
.mat-mdc-chip {
  height: 28px !important; // Increased height for better readability
  font-size: 13px !important; // Increased from 11px for better readability
  font-weight: 500 !important; // Medium weight for better prominence
  border-radius: var(--border-radius-xl) !important; // More rounded for modern look
  
  .mat-mdc-chip-label {
    font-size: 13px !important;
    line-height: 20px !important; // Better line height
    font-weight: 500 !important;
  }
  
  // Light color variants - much easier on the eyes
  &.mat-primary {
    background-color: #e3f2fd !important; // Very light blue background
    color: #1565c0 !important; // Darker blue text for contrast
    border: 1px solid #bbdefb !important;
    
    &.mdc-evolution-chip--selected {
      background-color: #bbdefb !important; // Slightly darker when selected
    }
  }
  
  &.mat-accent {
    background-color: #fff3e0 !important; // Very light orange background
    color: #ef6c00 !important; // Darker orange text for contrast
    border: 1px solid #ffcc02 !important;
    
    &.mdc-evolution-chip--selected {
      background-color: #ffcc02 !important; // Slightly darker when selected
    }
  }
  
  &.mat-warn {
    background-color: #ffebee !important; // Very light red background
    color: #c62828 !important; // Darker red text for contrast
    border: 1px solid #ffcdd2 !important;
    
    &.mdc-evolution-chip--selected {
      background-color: #ffcdd2 !important; // Slightly darker when selected
    }
  }
  
  // Default chip with subtle background
  &:not(.mat-primary):not(.mat-accent):not(.mat-warn) {
    background-color: #f5f5f5 !important; // Very light gray background
    color: rgba(0, 0, 0, 0.75) !important;
    border: 1px solid #e0e0e0 !important;
    
    &.mdc-evolution-chip--selected {
      background-color: #e0e0e0 !important; // Slightly darker gray when selected
    }
  }
  
  // Custom chip color variants for better role/status differentiation with light colors
  &.chip-success {
    background-color: #e8f5e8 !important; // Very light green background
    color: #2e7d32 !important; // Darker green text
    border: 1px solid #c8e6c9 !important;
    
    &.mdc-evolution-chip--selected {
      background-color: #c8e6c9 !important;
    }
  }
  
  &.chip-info {
    background-color: #e0f2f1 !important; // Very light teal background
    color: #00695c !important; // Darker teal text
    border: 1px solid #b2dfdb !important;
    
    &.mdc-evolution-chip--selected {
      background-color: #b2dfdb !important;
    }
  }
  
  &.chip-purple {
    background-color: #f3e5f5 !important; // Very light purple background
    color: #7b1fa2 !important; // Darker purple text
    border: 1px solid #e1bee7 !important;
    
    &.mdc-evolution-chip--selected {
      background-color: #e1bee7 !important;
    }
  }
  
  &.chip-teal {
    background-color: #e0f2f1 !important; // Very light teal background
    color: #00695c !important; // Darker teal text
    border: 1px solid #b2dfdb !important;
    
    &.mdc-evolution-chip--selected {
      background-color: #b2dfdb !important;
    }
  }
}

.mat-mdc-chip-set {
  .mat-mdc-chip {
    margin: 3px 4px 3px 0 !important; // Slightly increased spacing for larger chips
  }
}

// Checkbox Overrides - Material 3
.mat-mdc-checkbox {
  .mdc-checkbox {
    width: 16px !important; // Smaller checkbox
    height: 16px !important;
  }
  
  .mdc-checkbox__native-control {
    width: 16px !important;
    height: 16px !important;
  }
}

// Paginator Overrides - Material 3 Balanced
.mat-mdc-paginator {
  height: 44px !important; // Match table row height
  
  .mat-mdc-paginator-page-size-select {
    .mat-mdc-form-field-infix {
      min-height: 20px !important;
    }
  }
  
  .mat-mdc-icon-button {
    width: 44px !important; // Even larger for paginator for better accessibility
    height: 44px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    .mat-icon {
      font-size: 24px !important; // Large and clearly visible
      width: 24px !important;
      height: 24px !important;
      line-height: 24px !important;
    }
  }
  
  // Fix navigation button alignment
  .mat-mdc-paginator-navigation-first,
  .mat-mdc-paginator-navigation-previous,
  .mat-mdc-paginator-navigation-next,
  .mat-mdc-paginator-navigation-last {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
}

// Menu Overrides - Material 3
.mat-mdc-menu-panel {
  min-width: 180px !important;
  max-width: 480px !important;
  max-height: 600px !important;
  
  .mat-mdc-menu-item {
    height: 40px !important; // Consistent with button height
    
    .mat-icon {
      margin-right: 12px !important;
    }
  }
}

// Dialog Overrides - Material 3
.mat-mdc-dialog-container {
  .mat-mdc-dialog-surface {
    border-radius: var(--border-radius-xl) !important; // Material 3 border radius
  }
}

// Snackbar Overrides - Material 3
.mat-mdc-snack-bar-container {
  .mdc-snackbar__surface {
    border-radius: var(--border-radius-lg) !important;
  }
}

// Tooltip Overrides - Material 3
.mat-mdc-tooltip {
  font-size: 12px !important;
  line-height: 16px !important;
  border-radius: var(--border-radius-sm) !important;
}

// Card Overrides - Material 3
.mat-mdc-card {
  border-radius: var(--border-radius-xl) !important; // Material 3 border radius
  
  .mat-mdc-card-header {
    padding: 20px !important; // Increased padding for dashboard widgets
  }
  
  .mat-mdc-card-content {
    padding: 0 20px !important; // Increased padding for dashboard widgets
  }
  
  .mat-mdc-card-actions {
    padding: 12px 20px 20px !important; // Increased padding for dashboard widgets
  }
}

// Special handling for dashboard cards to ensure proper spacing
.dashboard-card,
.mat-mdc-card.dashboard-widget {
  .mat-mdc-card-header {
    padding: 20px 24px 12px 24px !important; // Reduced top padding, smaller bottom gap to content
  }
  
  .mat-mdc-card-content {
    padding: 0 24px 24px 24px !important; // No top padding, let header control spacing
    
    // Ensure form fields in dashboard cards have proper spacing
    .mat-mdc-form-field {
      margin-bottom: 16px !important;
      
      &:last-child {
        margin-bottom: 8px !important;
      }
    }
    
    // Grid layouts in cards need proper spacing
    .form-grid,
    .dashboard-grid {
      gap: 16px !important;
    }
    
    // Actions grid specific padding adjustments
    .actions-grid {
      gap: var(--spacing-lg) !important; // Use larger spacing for better button separation
      padding: 8px 0 !important; // Balanced top and bottom padding
      
      .mat-mdc-button,
      .mat-mdc-raised-button,
      .mat-mdc-outlined-button {
        margin: 0 !important; // Remove extra margin, rely on grid gap
        min-width: 140px !important; // Ensure buttons have good minimum width
      }
    }
    
    // Sections within cards
    .form-section {
      margin-bottom: 20px !important;
      
      &:last-child {
        margin-bottom: 0 !important;
      }
    }
    
    // Stat cards content (these don't have headers)
    .stat-content {
      margin: 0 !important; // Remove any default margins
    }
    
    // Chart placeholder
    .chart-placeholder {
      margin: 0 !important;
    }
    
    // Activity list
    .activity-list {
      margin: 0 !important;
    }
  }
  
  .mat-mdc-card-actions {
    padding: 16px 24px 24px !important;
  }
}

// Special handling for stat cards that don't have headers
.mat-mdc-card.dashboard-widget.stat-card {
  .mat-mdc-card-content {
    padding: 24px !important; // Increased padding for better breathing room in stat cards
  }
}

// Slider Overrides - Material 3
.mat-mdc-slider {
  height: 20px !important;
}

// Progress Bar Overrides - Material 3
.mat-mdc-progress-bar {
  height: 4px !important;
  border-radius: var(--border-radius-sm) !important;
}

// Tabs Overrides - Material 3
.mat-mdc-tab-group {
  .mat-mdc-tab {
    height: 48px !important;
  }
  
  .mat-mdc-tab-header {
    border-bottom: 1px solid var(--border-light) !important;
  }
}

// Footer/Toolbar Overrides - Material 3 Design
.footer-toolbar,
.mat-toolbar.footer-toolbar,
app-footer .mat-toolbar.footer-toolbar {
  background: linear-gradient(135deg, 
    rgba(63, 81, 181, 0.08), 
    rgba(48, 63, 159, 0.12)) !important; // Match header gradient background
  backdrop-filter: blur(10px) !important; // Match header backdrop filter
  border-top: 1px solid var(--outline-variant-color) !important; // Match header border style
  min-height: 40px !important; // Directly set reduced height for testing
  height: 40px !important; // Force exact height
  max-height: 40px !important; // Prevent expansion
  color: var(--on-surface-color) !important; // Match header text color
  flex-shrink: 0 !important; // Prevent the footer from shrinking
  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.1) !important; // Subtle shadow above
  
  .footer-content {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    width: 100% !important;
    padding: 0 var(--spacing-md) !important; // Reduced padding to match topnav
    height: 100% !important;
  }
  
  .footer-left {
    font-size: var(--font-size-sm) !important; // Use theme font size
    color: var(--on-surface-color) !important; // Match header text color
    font-weight: var(--font-weight-normal) !important;
  }
  
  .footer-right {
    display: flex !important;
    gap: var(--spacing-sm) !important; // Use theme spacing
    align-items: center !important;
    
    .mat-mdc-button,
    .mat-mdc-icon-button {
      color: var(--on-surface-color) !important; // Match header button color
      
      &:hover {
        color: var(--text-primary) !important;
        background-color: rgba(63, 81, 181, 0.1) !important; // Subtle hover effect matching theme
      }
      
      &:focus {
        background-color: rgba(63, 81, 181, 0.15) !important; // Accessibility focus matching theme
      }
    }
  }
  
  // Mobile responsive design
  @media (max-width: 768px) {
    min-height: auto !important;
    
    .footer-content {
      flex-direction: column !important;
      gap: var(--spacing-md) !important;
      padding: var(--spacing-lg) !important;
    }
    
    .footer-left {
      text-align: center !important;
      order: 2 !important; // Move to bottom on mobile
    }
    
    .footer-right {
      order: 1 !important; // Move to top on mobile
      justify-content: center !important;
    }
  }
}

// Header/Toolbar Overrides - Material 3 Design

.header-container {
  width: 100% !important;
  flex-shrink: 0 !important; // Prevent the header from shrinking
}

.header-toolbar,
.mat-toolbar.header-toolbar {
  position: sticky !important;
  top: 0 !important;
  z-index: 1000 !important;
  box-shadow: var(--shadow-sm) !important;
  display: flex !important;
  align-items: center !important;
  min-height: 64px !important;
  padding: 0 var(--spacing-lg) !important;
  background: linear-gradient(135deg, 
    rgba(63, 81, 181, 0.08), 
    rgba(48, 63, 159, 0.12)) !important; // Match sidenav header gradient
  backdrop-filter: blur(10px) !important;
  color: var(--on-surface-color) !important;
  border-bottom: 1px solid var(--outline-variant-color) !important;
  
  .sidenav-toggle {
    margin-right: var(--spacing-md) !important;
    
    mat-icon {
      color: var(--text-primary) !important;
    }
    
    &:hover {
      background-color: rgba(0, 0, 0, 0.04) !important;
    }
  }
  
  .app-title {
    font-size: var(--font-size-xl) !important;
    font-weight: var(--font-weight-semibold) !important;
    margin-right: var(--spacing-lg) !important;
    color: var(--on-surface-color) !important;
  }
  
  .spacer {
    flex: 1 1 auto !important;
  }
  
  .spacer-small {
    width: var(--spacing-lg) !important;
  }
  
  // Metrics Section (moved from dashboard-info-row to main toolbar)
  .metrics-section {
    display: flex !important;
    gap: var(--spacing-xl) !important;
    align-items: center !important;
    margin-right: var(--spacing-xl) !important;
    
    @media (max-width: 1024px) {
      display: none !important; // Hide on tablets and smaller
    }
  }
  
  .metric-item {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    min-width: 60px !important;
    
    .metric-label {
      font-size: var(--font-size-xs) !important;
      font-weight: var(--font-weight-normal) !important;
      color: var(--on-surface-variant-color) !important;
      text-transform: uppercase !important;
      letter-spacing: 0.5px !important;
      margin-bottom: var(--spacing-xs) !important;
      line-height: 1 !important;
    }
    
    .metric-value {
      font-size: var(--font-size-sm) !important;
      font-weight: var(--font-weight-bold) !important;
      line-height: 1 !important;
    }
    
    // Color variants for metrics
    &.metric-primary .metric-value {
      color: var(--primary-color) !important;
    }
    
    &.metric-success .metric-value {
      color: var(--success-color) !important;
    }
    
    &.metric-warning .metric-value {
      color: var(--warning-color) !important;
    }
    
    &.metric-error .metric-value {
      color: var(--error-color) !important;
    }
  }
  
  // Info Panels
  .info-panels {
    display: flex !important;
    gap: var(--spacing-xl) !important;
    align-items: center !important;
    
    @media (max-width: 768px) {
      display: none !important; // Hide on mobile
    }
  }
  
  .info-panel {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    min-width: 60px !important;
    
    .panel-label {
      font-size: var(--font-size-xs) !important;
      font-weight: var(--font-weight-normal) !important;
      color: var(--on-surface-variant-color) !important;
      text-transform: uppercase !important;
      letter-spacing: 0.5px !important;
      margin-bottom: var(--spacing-xs) !important;
      line-height: 1 !important;
    }
    
    .panel-value {
      font-size: var(--font-size-sm) !important;
      font-weight: var(--font-weight-semibold) !important;
      color: var(--on-surface-color) !important;
      line-height: 1 !important;
    }
  }
  
  // Header Action Buttons with Notification Badge
  .header-actions {
    display: flex !important;
    gap: var(--spacing-sm) !important;
    align-items: center !important;

    .mat-mdc-icon-button {
      position: relative !important;
      color: var(--on-surface-color) !important;
      transition: all 0.3s ease !important;
      
      &:hover {
        background-color: var(--surface-variant-color) !important;
      }
      
      // Active/Selected state for menu triggers
      &[aria-expanded="true"],
      &.cdk-menu-trigger[aria-expanded="true"],
      &.mat-menu-trigger[aria-expanded="true"] {
        background-color: var(--primary-light) !important;
        color: var(--primary-color) !important;
        box-shadow: inset 0 0 0 1px var(--primary-color) !important;
      }
      
      &.has-notifications {
        .mat-icon {
          color: #ff6f00 !important; // Material orange for better contrast on light background
        }
      }

      .notification-badge {
        position: absolute !important;
        top: 6px !important; // Slightly adjusted for better positioning
        right: 6px !important; // Slightly adjusted for better positioning
        background: var(--error-color) !important; // Use error color for better visibility
        color: white !important;
        border-radius: 50% !important;
        min-width: 16px !important; // Slightly smaller for better proportion
        height: 16px !important;
        font-size: 10px !important; // Smaller font for the badge
        font-weight: var(--font-weight-bold) !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        border: 2px solid #fafafa !important; // Match the light background
        z-index: 10 !important; // Higher z-index to appear above the icon
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important; // Add shadow for better visibility
      }
    }
  }
}

// Dropdown Menu Styles - Material 3
.header-dropdown-menu {
  .mat-mdc-menu-content {
    padding: var(--spacing-sm) 0 !important;
    min-width: 280px !important;
    border-radius: var(--border-radius-lg) !important;
    box-shadow: var(--shadow-lg) !important;
  }

  .mat-mdc-menu-item {
    position: relative !important;
    display: flex !important;
    align-items: center !important;
    gap: var(--spacing-md) !important;
    padding: var(--spacing-md) var(--spacing-lg) !important;
    min-height: 44px !important;
    font-size: var(--font-size-md) !important;

    .mat-icon {
      color: var(--text-secondary) !important;
      font-size: var(--icon-size-lg) !important;
      width: var(--icon-size-lg) !important;
      height: var(--icon-size-lg) !important;
    }

    .submenu-arrow {
      margin-left: auto !important;
      color: var(--text-disabled) !important;
      font-size: var(--icon-size-md) !important;
    }

    &:hover {
      background-color: var(--background-secondary) !important;
      
      .mat-icon {
        color: var(--text-primary) !important;
      }
    }
  }
}

// User Profile Menu - Material 3
.user-profile-menu {
  .mat-mdc-menu-content {
    padding: 0 !important;
    min-width: 280px !important;
    border-radius: var(--border-radius-lg) !important;
    box-shadow: var(--shadow-lg) !important;
  }

  .user-profile-header {
    display: flex !important;
    align-items: center !important;
    gap: var(--spacing-md) !important;
    padding: var(--spacing-lg) !important;
    background-color: var(--background-secondary) !important;
    border-bottom: 1px solid var(--border-light) !important;
    border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0 !important;

    .user-avatar-icon {
      color: var(--text-secondary) !important;
      font-size: 2.5rem !important;
      width: 2.5rem !important;
      height: 2.5rem !important;
      flex-shrink: 0 !important;
    }

    .user-info {
      flex: 1 !important;
      min-width: 0 !important;

      .user-name {
        font-size: var(--font-size-lg) !important;
        font-weight: var(--font-weight-semibold) !important;
        color: var(--text-primary) !important;
        margin: 0 0 var(--spacing-xs) 0 !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
      }

      .user-role {
        font-size: var(--font-size-sm) !important;
        color: var(--text-secondary) !important;
        margin: 0 0 var(--spacing-xs) 0 !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
      }

      .user-email {
        font-size: var(--font-size-sm) !important;
        color: var(--text-disabled) !important;
        margin: 0 !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
      }
    }
  }

  .mat-mdc-menu-item {
    display: flex !important;
    align-items: center !important;
    gap: var(--spacing-md) !important;
    padding: var(--spacing-md) var(--spacing-lg) !important;
    min-height: 44px !important;

    .mat-icon {
      color: var(--text-secondary) !important;
      font-size: var(--icon-size-lg) !important;
      width: var(--icon-size-lg) !important;
      height: var(--icon-size-lg) !important;
    }

    .submenu-arrow {
      margin-left: auto !important;
      color: var(--text-disabled) !important;
      font-size: var(--icon-size-md) !important;
    }

    &:hover {
      background-color: var(--background-secondary) !important;
      
      .mat-icon {
        color: var(--text-primary) !important;
      }
    }
  }
}

// Notifications Menu - Material 3
.notifications-menu {
  .mat-mdc-menu-content {
    padding: 0 !important;
    min-width: 420px !important;
    max-width: 480px !important;
    width: 450px !important;
    max-height: 600px !important;
    border-radius: var(--border-radius-lg) !important;
    box-shadow: var(--shadow-lg) !important;
    overflow-x: hidden !important;
    overflow-y: auto !important;
  }

  .notification-header {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: var(--spacing-lg) !important;
    background-color: var(--background-secondary) !important;
    border-bottom: 1px solid var(--border-light) !important;
    border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0 !important;

    h3 {
      margin: 0 !important;
      font-size: var(--font-size-lg) !important;
      font-weight: var(--font-weight-semibold) !important;
      color: var(--text-primary) !important;
    }

    .mat-mdc-icon-button {
      width: 32px !important;
      height: 32px !important;
      
      .mat-icon {
        font-size: var(--icon-size-md) !important;
      }
    }
  }

  .notification-list {
    max-height: 400px !important;
    overflow-y: auto !important;
  }

  .notification-item {
    display: flex !important;
    align-items: flex-start !important;
    gap: var(--spacing-md) !important;
    padding: var(--spacing-md) var(--spacing-lg) !important;
    border-bottom: 1px solid var(--border-light) !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;

    &:hover {
      background-color: var(--background-secondary) !important;
    }

    &.unread {
      background-color: #e3f2fd !important; // Material blue 50
      border-left: 4px solid var(--primary-color) !important;

      .notification-title {
        font-weight: var(--font-weight-semibold) !important;
      }
    }

    .notification-icon {
      width: var(--icon-size-xl) !important;
      height: var(--icon-size-xl) !important;
      font-size: var(--icon-size-xl) !important;
      color: var(--primary-color) !important;
      margin-top: var(--spacing-xs) !important;
    }

    .notification-content {
      flex: 1 !important;
      min-width: 0 !important; // Allow flex items to shrink below their content size
      overflow: hidden !important; // Prevent overflow

      .notification-title {
        font-size: var(--font-size-md) !important;
        font-weight: var(--font-weight-medium) !important;
        color: var(--text-primary) !important;
        margin: 0 0 var(--spacing-xs) 0 !important;
        line-height: 1.3 !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        white-space: nowrap !important;
      }

      .notification-message {
        font-size: var(--font-size-sm) !important;
        color: var(--text-secondary) !important;
        margin: 0 0 var(--spacing-xs) 0 !important;
        line-height: 1.4 !important;
        overflow: hidden !important;
        display: -webkit-box !important;
        -webkit-line-clamp: 2 !important;
        line-clamp: 2 !important;
        -webkit-box-orient: vertical !important;
        word-wrap: break-word !important;
      }

      .notification-time {
        font-size: var(--font-size-xs) !important;
        color: var(--text-disabled) !important;
        margin: 0 !important;
      }
    }
  }

  .notification-footer {
    padding: var(--spacing-md) var(--spacing-lg) !important;
    text-align: center !important;
    border-top: 1px solid var(--border-light) !important;
    background-color: var(--background-secondary) !important;
    border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg) !important;

    .mat-mdc-button {
      font-size: var(--font-size-sm) !important;
      text-transform: none !important;
    }
  }
  
  // Responsive design for notifications menu
  @media (max-width: 768px) {
    .mat-mdc-menu-content {
      min-width: 320px !important;
      max-width: 90vw !important;
      width: 350px !important;
    }
    
    .notification-item {
      padding: var(--spacing-sm) var(--spacing-md) !important;
      
      .notification-content {
        .notification-title {
          font-size: var(--font-size-sm) !important;
        }
        
        .notification-message {
          font-size: var(--font-size-xs) !important;
        }
      }
    }
  }
  
  @media (max-width: 480px) {
    .mat-mdc-menu-content {
      min-width: 280px !important;
      max-width: 95vw !important;
      width: 300px !important;
    }
  }
}

// Users Component Material Overrides
// Paginator overrides for better visibility
mat-paginator {
  .mat-mdc-paginator-container {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 0 var(--spacing-md) !important;
  }
  
  .mat-mdc-paginator-range-actions {
    display: flex !important;
    align-items: center !important;
    gap: var(--spacing-sm) !important;
  }
  
  // Make navigation icons more visible
  .mat-mdc-icon-button {
    mat-icon {
      font-size: 22px !important;
      width: 22px !important;
      height: 22px !important;
      color: var(--primary-color) !important;
    }
    
    &:hover mat-icon {
      color: var(--primary-dark) !important;
    }
    
    &:disabled mat-icon {
      color: rgba(0, 0, 0, 0.26) !important;
    }
  }
}

// Chip Material overrides for users table
.mat-chip-set {
  .mat-chip {
    margin: 2px 4px 2px 0 !important;
  }
}

// Reusable Table Styles - Material 3 Design
// Generic table container and styling that can be reused across components

// Table Container - Generic reusable container
.table-container {
  flex: 1 !important;
  background: white !important;
  border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg) !important;
  overflow: auto !important;
  display: flex !important;
  flex-direction: column !important;
  box-shadow: var(--shadow-sm) !important;
  
  // Table wrapper styles
  .mat-mdc-table {
    width: 100% !important;
  }
}

// Generic Table Header (can be used with any table)
.table-header {
  background: white !important;
  border-bottom: 1px solid var(--border-light) !important;
  padding: var(--spacing-lg) !important;
  flex-shrink: 0 !important;
  border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0 !important;
  box-shadow: var(--shadow-sm) !important;
  
  .header-content {
    display: flex !important;
    align-items: center !important;
    gap: var(--spacing-md) !important;
    
    mat-icon {
      font-size: var(--icon-size-xl) !important;
      width: var(--icon-size-xl) !important;
      height: var(--icon-size-xl) !important;
      color: var(--primary-color) !important;
    }
    
    .header-text {
      h1 {
        margin: 0 !important;
        color: var(--primary-color) !important;
        font-size: var(--font-size-xxl) !important;
        font-weight: var(--font-weight-bold) !important;
        letter-spacing: -0.01em !important;
      }
      
      p {
        margin: var(--spacing-xs) 0 0 0 !important;
        color: var(--text-secondary) !important;
        font-size: var(--font-size-lg) !important;
        font-weight: var(--font-weight-normal) !important;
      }
    }
  }
}

// Generic Table Filters Section
.table-filters {
  flex-shrink: 0 !important;
  background: white !important;
  padding: var(--spacing-lg) var(--spacing-lg) var(--spacing-md) var(--spacing-lg) !important;
  border-bottom: 1px solid var(--border-light) !important;
  
  .filter-row {
    display: flex !important;
    gap: var(--spacing-lg) !important;
    flex-wrap: wrap !important;
    
    .filter-field {
      min-width: 200px !important;
      flex: 1 !important;
      max-width: 300px !important;
    }
    
    .filter-action-btn {
      flex-shrink: 0 !important;
      white-space: nowrap !important;
      height: 40px !important; // Match form field height
    }
  }
}

// Generic Table Data Styles
.data-table {
  width: 100% !important;
  
  // Generic info column styling
  .data-info {
    display: flex !important;
    flex-direction: column !important;
    
    .data-name {
      font-weight: 600 !important;
      color: var(--text-primary) !important;
      font-size: var(--font-size-md) !important;
    }
    
    .data-subtitle {
      font-size: var(--font-size-sm) !important;
      color: var(--text-secondary) !important;
    }
  }
  
  // Generic code/ID column styling
  .data-code {
    font-family: inherit !important;
    font-weight: 500 !important;
    color: var(--text-primary) !important;
    font-size: var(--font-size-md) !important;
  }
  
  // Generic action buttons container
  .action-buttons {
    display: flex !important;
    gap: var(--spacing-sm) !important;
  }
  
  // Generic expandable chip
  .expandable-chip {
    cursor: pointer !important;
    transition: background-color 0.2s ease !important;
    
    &:hover {
      background-color: var(--primary-light) !important;
    }
  }
  
  // Generic chip styling with light backgrounds (Material 3 style)
  .role-chip {
    &.admin-role {
      background-color: #ffebee !important;
      color: #c62828 !important;
    }
    
    &.manager-role {
      background-color: #e3f2fd !important;
      color: #1565c0 !important;
    }
    
    &.developer-role {
      background-color: #f3e5f5 !important;
      color: #6a1b9a !important;
    }
    
    &.analyst-role {
      background-color: #e0f2f1 !important;
      color: #00695c !important;
    }
    
    &.support-role {
      background-color: #fff3e0 !important;
      color: #ef6c00 !important;
    }
  }
  
  .status-chip {
    &.active-status {
      background-color: #e8f5e8 !important;
      color: #2e7d32 !important;
    }
    
    &.inactive-status {
      background-color: #fff3e0 !important;
      color: #f57c00 !important;
    }
    
    &.suspended-status {
      background-color: #ffebee !important;
      color: #d32f2f !important;
    }
  }
}

// Generic Expandable Row Styles
.data-row {
  transition: background-color 0.2s ease !important;
  
  &.expanded-row {
    background-color: #f8f9fa !important;
    border-bottom: 2px solid var(--primary-color) !important;
  }
}

.detail-row {
  background-color: #f8f9fa !important;
  
  .detail-cell {
    padding: 0 !important;
    border-bottom: none !important;
  }
}

// Generic Detail Container
.detail-container {
  padding: var(--spacing-lg) !important;
  border-left: 4px solid var(--primary-color) !important;
  
  .detail-content {
    .detail-header {
      display: flex !important;
      justify-content: space-between !important;
      align-items: center !important;
      margin-bottom: var(--spacing-md) !important;
      
      h3 {
        display: flex !important;
        align-items: center !important;
        gap: var(--spacing-sm) !important;
        margin: 0 !important;
        color: var(--primary-color) !important;
        
        mat-icon {
          color: var(--primary-color) !important;
        }
      }
      
      .close-detail-btn {
        color: var(--text-secondary) !important;
      }
    }
    
    .detail-section {
      margin-bottom: var(--spacing-md) !important;
      
      h4 {
        display: flex !important;
        align-items: center !important;
        gap: var(--spacing-sm) !important;
        color: var(--text-primary) !important;
        margin: 0 0 var(--spacing-sm) 0 !important;
        font-size: var(--font-size-md) !important;
        font-weight: var(--font-weight-medium) !important;
        
        mat-icon {
          font-size: var(--icon-size-sm) !important;
          width: var(--icon-size-sm) !important;
          height: var(--icon-size-sm) !important;
          color: var(--primary-color) !important;
        }
      }
      
      .detail-grid {
        display: grid !important;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)) !important;
        gap: var(--spacing-sm) !important;
        
        .detail-item {
          display: flex !important;
          justify-content: space-between !important;
          align-items: center !important;
          padding: var(--spacing-xs) 0 !important;
          border-bottom: 1px solid var(--border-light) !important;
          
          .detail-label {
            font-weight: var(--font-weight-medium) !important;
            color: var(--text-secondary) !important;
            font-size: var(--font-size-sm) !important;
          }
          
          .detail-value {
            color: var(--text-primary) !important;
            font-size: var(--font-size-sm) !important;
            
            &.code-detail {
              font-family: inherit !important;
              color: var(--text-primary) !important;
              font-weight: 500 !important;
            }
            
            .status-icon {
              margin-right: var(--spacing-xs) !important;
              font-size: var(--icon-size-sm) !important;
              width: var(--icon-size-sm) !important;
              height: var(--icon-size-sm) !important;
            }
          }
        }
      }
    }
    
    .detail-actions {
      display: flex !important;
      gap: var(--spacing-sm) !important;
      margin-top: var(--spacing-md) !important;
      padding-top: var(--spacing-md) !important;
      border-top: 1px solid var(--border-light) !important;
    }
  }
}

// Generic No Data State
.no-data {
  text-align: center !important;
  padding: var(--spacing-xl) !important;
  color: var(--text-secondary) !important;
  flex: 1 !important;
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
  align-items: center !important;
  
  mat-icon {
    font-size: 64px !important;
    width: 64px !important;
    height: 64px !important;
    margin-bottom: var(--spacing-md) !important;
    opacity: 0.5 !important;
  }
  
  p {
    margin: 0 !important;
    font-size: var(--font-size-lg) !important;
  }
}

// Responsive Design for Tables
@media (max-width: 768px) {
  .table-filters {
    .filter-row {
      flex-direction: column !important;
      align-items: stretch !important;
      gap: var(--spacing-md) !important;
      
      .filter-field {
        min-width: unset !important;
        max-width: unset !important;
      }
      
      .filter-action-btn {
        width: 100% !important;
        justify-content: center !important;
      }
    }
  }
  
  .data-table {
    font-size: var(--font-size-sm) !important;
    
    .detail-container {
      padding: var(--spacing-md) !important;
      
      .detail-grid {
        grid-template-columns: 1fr !important;
      }
    }
  }
}

@media (max-width: 480px) {
  .table-header {
    .header-content {
      flex-direction: column !important;
      align-items: flex-start !important;
      text-align: center !important;
    }
  }
  
  .detail-actions {
    flex-direction: column !important;
  }
}

// Reusable Dashboard Components - Material 3 Design
// Generic dashboard layout and styling that can be reused across components

// Dashboard Container - Generic reusable container
.dashboard-container {
  padding: var(--spacing-xl) var(--spacing-lg) !important;
  width: 100% !important;
  max-width: none !important;
  margin: 0 !important;
  box-sizing: border-box !important;
}

// Dashboard Title
.dashboard-title {
  margin-bottom: var(--spacing-xxl) !important;
  color: var(--text-primary) !important;
  font-weight: var(--font-weight-medium) !important;
  font-size: var(--font-size-xxl) !important;
}

// Stats Grid Layout
.stats-grid {
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)) !important;
  gap: var(--spacing-lg) !important;
  margin-bottom: var(--spacing-xl) !important;
  
  @media (min-width: 1400px) {
    grid-template-columns: repeat(4, 1fr) !important;
  }
  
  @media (max-width: 768px) {
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) !important;
    gap: var(--spacing-md) !important;
  }
  
  @media (max-width: 480px) {
    grid-template-columns: 1fr !important;
    gap: var(--spacing-sm) !important;
  }
}

// Stat Card Component
.stat-card {
  .stat-content {
    display: flex !important;
    align-items: center !important;
    gap: var(--spacing-lg) !important;
    padding: var(--spacing-sm) 0 !important; // Add vertical padding for better proportion
  }
  
  .stat-icon {
    width: 60px !important;
    height: 60px !important;
    border-radius: 50% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    color: white !important;
    flex-shrink: 0 !important; // Prevent icon from shrinking
    
    mat-icon {
      font-size: 2rem !important;
      width: 2rem !important;
      height: 2rem !important;
    }
  }
  
  .stat-info {
    flex: 1 !important; // Allow info to take remaining space
    
    .stat-value {
      margin: 0 0 var(--spacing-xs) 0 !important; // Reduced bottom margin
      font-size: var(--font-size-xxl) !important;
      font-weight: var(--font-weight-semibold) !important;
      color: var(--text-primary) !important;
      line-height: 1.2 !important; // Better line height for large numbers
    }
    
    .stat-title {
      margin: 0 !important;
      color: var(--text-secondary) !important;
      font-size: var(--font-size-sm) !important;
      line-height: 1.4 !important; // Better line height for readability
    }
  }
}

// Content Grid Layout
.content-grid {
  display: grid !important;
  grid-template-columns: 2fr 1fr !important;
  gap: var(--spacing-lg) !important;
  margin-bottom: var(--spacing-xl) !important;
  
  @media (max-width: 1024px) {
    grid-template-columns: 1fr !important;
    gap: var(--spacing-md) !important;
  }
}

// Chart Card Component
.chart-card {
  .chart-placeholder {
    height: 300px !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    background: var(--background-secondary) !important;
    border-radius: var(--border-radius-lg) !important;
    color: var(--text-secondary) !important;
    
    .chart-icon {
      font-size: 4rem !important;
      width: 4rem !important;
      height: 4rem !important;
      margin-bottom: var(--spacing-lg) !important;
      opacity: 0.5 !important;
    }
    
    .chart-title {
      font-size: var(--font-size-lg) !important;
      color: var(--text-secondary) !important;
    }
  }
}

// Activities Card Component
.activities-card {
  .activity-list {
    max-height: 300px !important;
    overflow-y: auto !important;
  }
  
  .activity-item {
    display: flex !important;
    align-items: center !important;
    gap: var(--spacing-lg) !important;
    padding: var(--spacing-md) 0 !important;
    border-bottom: 1px solid var(--border-light) !important;
    transition: background-color 0.2s ease !important;
    
    &:last-child {
      border-bottom: none !important;
    }
    
    &:hover {
      background-color: var(--background-secondary) !important;
      border-radius: var(--border-radius-md) !important;
      margin: 0 calc(-1 * var(--spacing-sm)) !important;
      padding: var(--spacing-md) var(--spacing-sm) !important;
      
      .activity-icon {
        transform: scale(1.05) !important;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
      }
    }
    
    .activity-icon {
      color: #ffffff !important;
      background: #6750a4 !important; // Default primary purple with good contrast
      border-radius: 50% !important;
      padding: var(--spacing-sm) !important;
      width: 2.5rem !important;
      height: 2.5rem !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      flex-shrink: 0 !important;
      font-size: var(--icon-size-md) !important;
      font-weight: var(--font-weight-medium) !important;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
      transition: transform 0.2s ease, box-shadow 0.2s ease !important;
    }
    
    // Activity icon color variants with high contrast ratios
    .activity-icon-primary {
      color: #ffffff !important;
      background: #1976d2 !important; // Material Blue 700
    }
    
    .activity-icon-success {
      color: #ffffff !important;
      background: #388e3c !important; // Material Green 700
    }
    
    .activity-icon-info {
      color: #ffffff !important;
      background: #0277bd !important; // Material Light Blue 800
    }
    
    .activity-icon-warning {
      color: #ffffff !important;
      background: #f57c00 !important; // Material Orange 700
    }

    .activity-content {
      flex: 1 !important;
      min-width: 0 !important;
      
      .activity-action {
        margin: 0 0 var(--spacing-xs) 0 !important;
        font-weight: var(--font-weight-medium) !important;
        color: var(--text-primary) !important;
        font-size: var(--font-size-md) !important;
      }
      
      .activity-time {
        font-size: var(--font-size-sm) !important;
        color: var(--text-secondary) !important;
      }
    }
  }
}

// Actions Card Component
.actions-card {
  .mat-mdc-card-content {
    padding: 16px 24px 32px 24px !important; // Extra padding for quick actions
  }
  
  .actions-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)) !important;
    gap: var(--spacing-md) !important;
    
    .mat-mdc-button,
    .mat-mdc-raised-button,
    .mat-mdc-outlined-button {
      height: 48px !important; // Material 3 standard button height
      min-width: 160px !important; // Ensure good button width
      
      mat-icon {
        margin-right: var(--spacing-sm) !important;
      }
      
      @media (max-width: 768px) {
        min-width: 120px !important;
      }
      
      @media (max-width: 480px) {
        min-width: 100px !important;
        font-size: 0.875rem !important;
      }
    }
  }
}

// Actions Card Responsive Design
@media (max-width: 768px) {
  .actions-card {
    .actions-grid {
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)) !important;
      gap: var(--spacing-sm) !important;
    }
  }
}

@media (max-width: 480px) {
  .actions-card {
    .actions-grid {
      grid-template-columns: 1fr 1fr !important;
      gap: var(--spacing-xs) !important;
    }
  }
}

// Widget Card Base (can be extended for different widget types)
.widget-card {
  .mat-mdc-card-header {
    .mat-mdc-card-title {
      font-size: var(--font-size-lg) !important;
      font-weight: var(--font-weight-medium) !important;
      color: var(--text-primary) !important;
    }
    
    .mat-mdc-card-subtitle {
      font-size: var(--font-size-sm) !important;
      color: var(--text-secondary) !important;
    }
  }
}

// Dashboard Responsive Design
@media (max-width: 768px) {
  .dashboard-container {
    padding: var(--spacing-md) var(--spacing-sm) !important;
  }
  
  .actions-card {
    .mat-mdc-card-content {
      padding: 16px !important; // Slightly reduced padding on mobile
    }
    
    .actions-grid {
      grid-template-columns: 1fr !important;
      gap: var(--spacing-md) !important;
      
      .mat-mdc-button,
      .mat-mdc-raised-button,
      .mat-mdc-outlined-button {
        width: 100% !important; // Full width on mobile
        min-width: unset !important;
      }
    }
  }
  
  .stat-card {
    .stat-content {
      gap: var(--spacing-md) !important;
    }
    
    .stat-icon {
      width: 50px !important;
      height: 50px !important;
      
      mat-icon {
        font-size: 1.5rem !important;
        width: 1.5rem !important;
        height: 1.5rem !important;
      }
    }
    
    .stat-info {
      .stat-value {
        font-size: var(--font-size-xl) !important;
      }
    }
  }
  
  .chart-card {
    .chart-placeholder {
      height: 250px !important;
      
      .chart-icon {
        font-size: 3rem !important;
        width: 3rem !important;
        height: 3rem !important;
      }
    }
  }
  
  .activities-card {
    .activity-list {
      max-height: 250px !important;
    }
    
    .activity-item {
      gap: var(--spacing-md) !important;
      
      .activity-icon {
        width: 2rem !important;
        height: 2rem !important;
        font-size: var(--icon-size-sm) !important;
      }
    }
  }
}

@media (max-width: 480px) {
  .dashboard-container {
    padding: var(--spacing-sm) !important;
  }
  
  .dashboard-title {
    font-size: var(--font-size-xl) !important;
    text-align: center !important;
    margin-bottom: var(--spacing-lg) !important;
  }
}

// Router outlet component constraints
router-outlet + * {
  display: block !important;
  height: 100% !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
}

// Ensure all page components respect container boundaries and use full width
app-dashboard,
app-users,
app-analytics,
app-lookup-management,
app-settings,
app-orders {
  display: block !important;
  height: 100% !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  padding: var(--spacing-md) !important;
  box-sizing: border-box !important;
  width: 100% !important;
  margin: 0 !important;
}

// Utility classes
.hidden {
  display: none !important;
}
// Global Layout - Keep only essential layout styles

// Sidenav Container
mat-sidenav-container {
  height: 100vh !important;
}

mat-sidenav {
  width: 240px !important;
  
  // Ensure sidenav content uses full height
  app-sidenav {
    height: 100% !important;
    display: block !important;
  }
}

mat-sidenav-content {
  display: flex !important;
  flex-direction: column !important;
  height: 100vh !important;
  overflow: hidden !important;
  
  // Header stays at top
  app-header {
    flex-shrink: 0 !important;
  }
  
  // Horizontal menu bar stays below header
  .horizontal-menu-bar {
    flex-shrink: 0 !important;
  }
  
  // Main content area can scroll
  .main-content {
    flex: 1 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    background-color: var(--background-secondary) !important;
    min-height: 0 !important; // Important for flex child to respect overflow
    max-height: 100% !important;
    width: 100% !important; // Ensure full width usage
    
    // Ensure all child components respect the container height and width
    > * {
      max-width: 100% !important;
      width: 100% !important;
    }
  }
  
  // Footer stays at bottom
  app-footer {
    flex-shrink: 0 !important;
    border-top: 1px solid var(--border-light) !important;
    background-color: white !important;
    width: 100% !important; // Ensure footer uses full width
  }
}

// Gradient animation keyframes 
@keyframes gradientShift {
  0%, 100% { background-position: 0% 50%; }
  25% { background-position: 100% 25%; }
  50% { background-position: 100% 100%; }
  75% { background-position: 0% 100%; }
}

// Horizontal Menu Bar Navigation - Enhanced Material 3 Design
.horizontal-menu-bar {
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  background-color: white !important;
  border-bottom: 1px solid var(--border-light) !important;
  padding: 0 var(--spacing-md) !important; // Reduced from lg to md for better alignment with overall spacing
  min-height: 56px !important;
  box-shadow: var(--shadow-sm) !important;
  position: sticky !important;
  top: 64px !important; // Height of the header toolbar
  z-index: 100 !important;
  flex-shrink: 0 !important;

  .menu-nav {
    display: flex !important;
    align-items: center !important;
    gap: var(--spacing-xs) !important;
    flex: 1 !important;

    .menu-item-container {
      position: relative !important;

      .menu-item {
        min-width: auto !important;
        padding: var(--spacing-sm) var(--spacing-lg) !important;
        height: 40px !important;
        border-radius: 20px !important;
        font-size: var(--font-size-md) !important; // Increased from sm to md for better readability
        font-weight: var(--font-weight-medium) !important;
        color: var(--text-secondary) !important;
        transition: all 0.3s ease !important;
        display: flex !important;
        align-items: center !important;
        gap: var(--spacing-sm) !important;
        cursor: pointer !important;
        text-transform: none !important; // Ensure text is not uppercased

        mat-icon {
          font-size: 20px !important; // Increased from 18px for better visibility
          height: 20px !important;
          width: 20px !important;
        }

        &.dropdown {
          .dropdown-arrow {
            margin-left: var(--spacing-xs) !important;
            font-size: 18px !important; // Increased for better visibility
            transition: transform 0.2s ease !important;
          }
          
          &[aria-expanded="true"] {
            background-color: var(--background-secondary) !important; // Light background instead of primary-light
            color: var(--primary-color) !important;
            border: 1px solid var(--primary-light) !important; // Add subtle border for active state
            
            .dropdown-arrow {
              transform: rotate(180deg) !important;
            }
          }
        }

        &:hover {
          background-color: var(--background-secondary) !important;
          color: var(--text-primary) !important;
        }

        &.active {
          background-color: var(--background-secondary) !important; // Light background instead of primary-light
          color: var(--primary-color) !important;
          font-weight: var(--font-weight-semibold) !important;
          border: 1px solid var(--primary-light) !important; // Add subtle border for active state
        }
      }
    }
  }

  // Action buttons section  
  .action-buttons {
    display: flex !important;
    align-items: center !important;
    gap: var(--spacing-sm) !important;

    .mat-mdc-icon-button {
      width: 36px !important;
      height: 36px !important;
      
      .mat-icon {
        font-size: 20px !important;
      }
    }
  }
}

// Custom Menu Styles (Material 3 Design) - Enhanced
.custom-menu {
  .mat-mdc-menu-panel {
    min-width: 200px !important;
    max-width: 300px !important;
    box-shadow: var(--shadow-lg) !important;
    border-radius: var(--border-radius-lg) !important;
    border: 1px solid var(--border-light) !important;
  }

  .mat-mdc-menu-item {
    padding: var(--spacing-md) var(--spacing-lg) !important; // Increased padding
    height: auto !important;
    min-height: 48px !important; // Increased min-height for better touch targets
    
    .mat-icon {
      margin-right: var(--spacing-md) !important; // Increased margin
      color: var(--text-secondary) !important;
      font-size: 20px !important; // Increased icon size
      width: 20px !important;
      height: 20px !important;
    }
    
    span {
      font-size: var(--font-size-md) !important; // Increased from sm to md
      font-weight: var(--font-weight-medium) !important;
      color: var(--text-primary) !important; // Ensure good contrast
    }
    
    &:hover {
      background-color: var(--primary-light) !important;
      
      .mat-icon {
        color: var(--primary-color) !important;
      }
      
      span {
        color: var(--primary-color) !important;
      }
    }
  }
}

// Menu Positioning and Behavior
.cdk-overlay-pane {
  .mat-mdc-menu-panel {
    transform-origin: top left !important;
    max-height: 600px !important;
    max-width: 480px !important;
    overflow-y: auto !important;
  }
}

.cdk-overlay-backdrop {
  &.cdk-overlay-backdrop-showing {
    background: rgba(0, 0, 0, 0.32) !important;
  }
}

.mat-mdc-menu-trigger {
  &:not(.mat-mdc-menu-trigger-for) {
    cursor: pointer !important;
  }
}

// Global Material Toolbar Overrides
.mat-toolbar {
  &.mat-primary {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%) !important;
  }
}

// Responsive Navigation
@media (max-width: 768px) {
  .horizontal-menu-bar {
    padding: 0 var(--spacing-sm) !important;
    
    .menu-nav {
      gap: 2px !important;
      
      .menu-item {
        padding: 6px 12px !important;
        font-size: var(--font-size-xs) !important;
        
        mat-icon {
          margin-right: var(--spacing-xs) !important;
          font-size: 16px !important;
          height: 16px !important;
          width: 16px !important;
        }
      }
    }
    
    .action-buttons {
      gap: var(--spacing-xs) !important;
      
      .mat-mdc-icon-button {
        width: 32px !important;
        height: 32px !important;
        
        .mat-icon {
          font-size: 18px !important;
        }
      }
    }
  }
}

@media (max-width: 600px) {
  .horizontal-menu-bar {
    .menu-nav {
      .menu-item {
        padding: 6px 8px !important;
        
        mat-icon {
          margin-right: 2px !important;
        }
        
        // Hide text on very small screens, show only icons
        span:not(.mat-icon) {
          display: none !important;
        }
      }
    }
  }
}

// MDC List Item Height Overrides for Sidenav
.mdc-list-item {
  min-height: auto !important;
  height: auto !important;
}

.mat-mdc-list-item {
  min-height: auto !important;
  height: auto !important;
}

// Sidenav specific overrides
mat-sidenav {
  .mdc-list-item {
    min-height: auto !important;
    height: auto !important;
    padding: 8px 16px !important;
  }
  
  .mat-mdc-list-item {
    min-height: auto !important;
    height: auto !important;
    padding: 8px 16px !important;
  }
  
  .mat-mdc-list-item-content {
    min-height: auto !important;
    height: auto !important;
    padding: 0 !important;
  }
}

// Search Container Styles
.search-container {
  margin-right: 4px !important; // Reduced from var(--spacing-xs) for tighter spacing
  display: flex !important;
  align-items: center !important;
  
  .search-field {
    width: 180px !important; // Reduced from 220px for more compact layout
    font-size: var(--font-size-sm) !important;
    
    .mat-mdc-form-field-wrapper {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    
    .mat-mdc-form-field-flex {
      height: 36px !important;
      align-items: center !important;
    }
    
    .mat-mdc-text-field-wrapper {
      padding: 0 12px !important; // Reduced from 12px for tighter spacing
      height: 36px !important;
    }
    
    .mat-mdc-form-field-infix {
      padding: 6px 0 !important;
      line-height: 1.2 !important;
      min-height: 20px !important;
    }
    
    .mat-mdc-form-field-outline {
      color: var(--border-light) !important;
    }
    
    .mat-mdc-form-field-subscript-wrapper {
      display: none !important;
    }
    
    input {
      font-size: 14px !important;
      line-height: 24px !important;
      padding: 0 4px !important; // Reduced padding for tighter text alignment
      margin: 0 !important;
      width: calc(100% - 8px) !important; // Account for padding to prevent overflow
    }
    
    .mat-mdc-form-field-outline-thick {
      color: var(--primary-color) !important;
    }
    
    input {
      font-size: 14px !important;
      color: var(--text-primary) !important;
      
      &::placeholder {
        color: var(--text-secondary) !important;
        opacity: 0.7 !important;
      }
    }
    
    @media (max-width: 768px) {
      width: 140px !important; // Reduced from 180px
    }
    
    @media (max-width: 480px) {
      width: 100px !important; // Reduced from 120px
    }
  }
}

// ============================================
// SIDENAV COMPONENT STYLES
// ============================================

// Sidenav Header Styles - Material 3 Design
.sidenav-header {
  padding: var(--spacing-md) var(--spacing-md);
  background: linear-gradient(135deg, 
    rgba(63, 81, 181, 0.15), 
    rgba(48, 63, 159, 0.20));
  color: var(--text-primary);
  min-height: var(--sidenav-header-height) !important; // Use CSS custom property to match top header area
  display: flex;
  flex-direction: column;
  justify-content: space-between; // Distribute space between Apex and profile
  
  .admin-tools-section {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-sm); // Add space below Apex
    
    .admin-icon {
      font-size: var(--icon-size-sm);
      width: var(--icon-size-sm);
      height: var(--icon-size-sm);
    }
    
    .admin-text {
      font-size: var(--font-size-xl);
      font-weight: var(--font-weight-bold);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
  }
  
  // Spacer for visual separation
  .header-spacer {
    flex: 1; // Takes up available space
    min-height: var(--spacing-lg); // Minimum spacing
  }
  
  .profile-section {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm); // Increased gap for better spacing
    margin-top: auto; // Push to bottom of header
    
    .profile-avatar {
      width: 44px; // Slightly larger avatar
      height: 44px;
      border-radius: 50%;
      background-color: rgba(63, 81, 181, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid rgba(63, 81, 181, 0.2); // Add subtle border
      
      .avatar-icon {
        font-size: var(--icon-size-lg);
        width: var(--icon-size-lg);
        height: var(--icon-size-lg);
        color: var(--primary-color);
      }
    }
    
    .profile-info {
      flex: 1;
      
      .profile-name {
        font-size: var(--font-size-lg); // Larger name text
        font-weight: var(--font-weight-bold); // Bolder name
        margin-bottom: 3px; // More space between name and role
        color: var(--text-primary);
      }
      
      .profile-role {
        font-size: var(--font-size-sm); // Slightly larger role text
        opacity: 0.8; // Less transparent
        color: var(--text-secondary);
        font-weight: var(--font-weight-medium);
      }
    }
  }
}

// Navigation List Styles
.nav-list {
  padding: var(--spacing-xs) 0;
}

// Custom nav item styling for consistency - Material 3
.nav-item {
  display: flex;
  align-items: center;
  padding: 4px var(--spacing-sm);
  margin: 0 var(--spacing-xs) 1px 0;
  color: inherit;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.3s ease;
  min-height: 32px;
  box-sizing: border-box;
  position: relative;
  border-radius: var(--border-radius-md);
  
  // Ensure proper ripple centering - Material 3
  .mat-ripple {
    border-radius: inherit;
  }
  
  mat-icon {
    margin-right: var(--spacing-xs);
    font-size: var(--icon-size-md);
    width: var(--icon-size-md);
    height: var(--icon-size-md);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  span {
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-medium);
    flex: 1;
  }
  
  &:hover {
    background-color: rgba(0, 0, 0, 0.06);
    border-radius: var(--border-radius-md);
  }
  
  &.active-link {
    background-color: rgba(63, 81, 181, 0.08);
    color: var(--primary-color);
    border-radius: var(--border-radius-md);
    
    mat-icon {
      color: var(--primary-color);
    }
  }
  
  // Disabled state styles for main nav items - Material 3
  &.disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
    
    mat-icon:not(.info-icon) {
      color: var(--text-disabled);
    }
    
    span {
      color: var(--text-disabled);
    }
    
    .info-icon {
      color: var(--warning-color) !important;
      margin-left: auto;
      font-size: var(--icon-size-sm);
      width: var(--icon-size-sm);
      height: var(--icon-size-sm);
      opacity: 0.8;
      cursor: help;
      pointer-events: all; // Allow hover for tooltip
      
      &:hover {
        opacity: 1;
        color: #f57c00 !important; // Darker orange on hover
      }
    }
    
    &:hover {
      background-color: transparent;
    }
  }
}

// Submenu Styles - Material 3
.submenu {
  margin-left: var(--spacing-md);
  border-left: 2px solid rgba(0, 0, 0, 0.08);
  padding-left: var(--spacing-xs);
  margin-top: var(--spacing-xs);
  margin-bottom: var(--spacing-xs);
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease-in-out;
  
  &.expanded {
    max-height: 500px; // Large enough to accommodate all menu items
    overflow-y: auto;
  }
  
  .sub-item {
    display: flex;
    align-items: center;
    padding: 2px var(--spacing-xs);
    color: inherit;
    text-decoration: none;
    cursor: pointer;
    transition: all 0.3s ease;
    min-height: 28px;
    border-radius: var(--border-radius-sm);
    
    .sub-icon {
      margin-right: var(--spacing-xs);
      font-size: var(--icon-size-sm);
      width: var(--icon-size-sm);
      height: var(--icon-size-sm);
      opacity: 0.7;
    }
    
    span {
      font-size: var(--font-size-md);
      flex: 1;
    }
    
    &:hover {
      background-color: rgba(0, 0, 0, 0.06);
    }
    
    &.active-link {
      background-color: rgba(63, 81, 181, 0.08);
      color: var(--primary-color);
      
      .sub-icon {
        color: var(--primary-color);
      }
    }
    
    // Disabled state styles - Material 3
    &.disabled {
      opacity: 0.5;
      cursor: not-allowed;
      pointer-events: none;
      
      .sub-icon {
        color: var(--text-disabled);
      }
      
      span {
        color: var(--text-disabled);
      }
      
      .info-icon {
        color: var(--warning-color) !important;
        margin-left: auto;
        font-size: var(--icon-size-sm);
        width: var(--icon-size-sm);
        height: var(--icon-size-sm);
        opacity: 0.8;
        cursor: help;
        pointer-events: all; // Allow hover for tooltip
        
        &:hover {
          opacity: 1;
          color: #f57c00 !important; // Darker orange on hover
        }
      }
      
      &:hover {
        background-color: transparent;
      }
    }
  }
}

// Sidenav Footer Styles
.sidenav-footer {
  border-top: 1px solid var(--border-light);
  padding: var(--spacing-xs) 0;
}

// Global Material list item overrides for proper ripple centering - Material 3
.mat-mdc-list-item {
  .mdc-list-item__ripple {
    border-radius: inherit !important;
  }
  
  .mat-ripple {
    border-radius: inherit !important;
    overflow: hidden !important;
  }
  
  .mdc-list-item__content {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    position: relative !important;
  }
}

// Expandable Menu Styles - Material 3
.expandable-item {
  .expandable-header {
    cursor: pointer !important;
    user-select: none;
    position: relative;
    pointer-events: all !important;
    
    .expand-icon {
      position: absolute;
      right: var(--spacing-xs);
      font-size: var(--icon-size-md);
      width: var(--icon-size-md);
      height: var(--icon-size-md);
      transition: transform 0.3s ease;
      color: var(--text-secondary);
      pointer-events: none; // Prevent icon from blocking clicks
      z-index: 1;
      
      &.expanded {
        transform: rotate(180deg);
      }
    }
    
    &:hover {
      background-color: rgba(0, 0, 0, 0.06) !important;
    }
    
    // Ensure the entire header is clickable
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 0;
      pointer-events: all;
    }
  }
}

// Global Table Form Controls - Compact line height for better density
.mat-mdc-table {
  .mat-mdc-form-field {
    line-height: 1.2 !important;
    
    .mat-mdc-text-field-wrapper {
      height: 36px !important;
      line-height: 1.2 !important;
    }
    
    .mat-mdc-form-field-infix {
      padding: 8px 0 !important;
      line-height: 1.2 !important;
      min-height: 20px !important;
    }
    
    input.mat-mdc-input-element {
      line-height: 1.2 !important;
      height: 20px !important;
      padding: 0 !important;
      font-size: var(--font-size-sm) !important;
    }
    
    .mat-mdc-form-field-wrapper {
      padding-bottom: 0 !important;
    }
    
    .mat-mdc-form-field-flex {
      align-items: center !important;
    }
  }
  
  // Table cell height reduction
  .mat-mdc-cell,
  .mat-mdc-header-cell {
    line-height: 1.3 !important;
    padding: var(--spacing-xs) var(--spacing-sm) !important;
  }
  
  .mat-mdc-row {
    min-height: 42px !important;
    height: 42px !important;
  }
  
  .mat-mdc-header-row {
    min-height: 40px !important;
    height: 40px !important;
  }
}

// Global form field compact styling
.mat-mdc-form-field.table-input {
  width: 100% !important;
  margin: 0 !important;
  line-height: 1.2 !important;
  
  .mat-mdc-text-field-wrapper {
    height: 36px !important;
    padding: 4px 8px !important;
    line-height: 1.2 !important;
  }
  
  .mat-mdc-form-field-infix {
    padding: 6px 0 !important;
    line-height: 1.2 !important;
    min-height: 18px !important;
  }
  
  input {
    line-height: 1.2 !important;
    height: 18px !important;
    font-size: var(--font-size-sm) !important;
  }
}

// Global Action Button Styles - Material 3 Design
// Consistent button styling across all components
.mat-mdc-raised-button,
.mat-mdc-outlined-button,
.mat-mdc-button {
  &.action-button-primary {
    background: var(--primary-color) !important;
    color: var(--white) !important;
    border: none !important;
    font-weight: var(--font-weight-medium) !important;
    text-transform: none !important;
    letter-spacing: 0 !important;
    min-width: 140px !important;
    height: 40px !important;
    
    &:hover {
      background: var(--primary-light) !important;
    }
    
    mat-icon {
      margin-right: var(--spacing-xs) !important;
      font-size: var(--icon-size-sm) !important;
      width: var(--icon-size-sm) !important;
      height: var(--icon-size-sm) !important;
    }
  }
  
  &.action-button-secondary {
    background: transparent !important;
    color: var(--primary-color) !important;
    border: 1px solid var(--primary-color) !important;
    font-weight: var(--font-weight-medium) !important;
    text-transform: none !important;
    letter-spacing: 0 !important;
    min-width: 140px !important;
    height: 40px !important;
    
    &:hover {
      background: var(--primary-container) !important;
    }
    
    mat-icon {
      margin-right: var(--spacing-xs) !important;
      font-size: var(--icon-size-sm) !important;
      width: var(--icon-size-sm) !important;
      height: var(--icon-size-sm) !important;
    }
  }
  
  &.action-button-accent {
    background: var(--accent-color) !important;
    color: var(--white) !important;
    border: none !important;
    font-weight: var(--font-weight-medium) !important;
    text-transform: none !important;
    letter-spacing: 0 !important;
    min-width: 140px !important;
    height: 40px !important;
    
    &:hover {
      background: var(--accent-light) !important;
    }
    
    mat-icon {
      margin-right: var(--spacing-xs) !important;
      font-size: var(--icon-size-sm) !important;
      width: var(--icon-size-sm) !important;
      height: var(--icon-size-sm) !important;
    }
  }
  
  &.action-button-warning {
    background: var(--warning-color) !important;
    color: var(--white) !important;
    border: none !important;
    font-weight: var(--font-weight-medium) !important;
    text-transform: none !important;
    letter-spacing: 0 !important;
    min-width: 140px !important;
    height: 40px !important;
    
    &:hover {
      background: var(--warning-light) !important;
    }
    
    mat-icon {
      margin-right: var(--spacing-xs) !important;
      font-size: var(--icon-size-sm) !important;
      width: var(--icon-size-sm) !important;
      height: var(--icon-size-sm) !important;
    }
  }
}

// ===== BREADCRUMB NAVIGATION COMPONENT =====
// Global breadcrumb component styles for consistent navigation

.breadcrumb-container {
  width: 100%;
  margin-bottom: var(--spacing-2xs); // Even smaller margin for minimal prominence
  opacity: 0.7; // More subtle overall appearance
  
  .breadcrumb-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--spacing-2xs); // Reduced gap
  }
  
  .breadcrumb-item {
    display: flex;
    align-items: center;
    
    &.current {
      .breadcrumb-current {
        color: #757575; // Subtle gray instead of primary
        font-weight: var(--font-weight-medium); // Less bold
        font-size: var(--font-size-sm); // Consistent smaller size
      }
    }
  }
  

  


  

  
  // Responsive design
  @media (max-width: 768px) {
    margin-bottom: var(--spacing-sm);
    
    .breadcrumb-label {
      display: none;
      
      // Show label for last item (current page)
      .breadcrumb-item:last-child & {
        display: inline;
      }
    }
    
    // Always show Dashboard label
    .breadcrumb-item:first-child .breadcrumb-label {
      display: inline;
    }
  }
  
  @media (max-width: 480px) {
    .breadcrumb-list {
      gap: var(--spacing-2xs);
    }
    
    .breadcrumb-link,
    .breadcrumb-current {
      padding: var(--spacing-2xs) var(--spacing-xs);
      font-size: var(--font-size-xs);
    }
    
    .breadcrumb-icon {
      font-size: var(--icon-size-xs);
      width: var(--icon-size-xs);
      height: var(--icon-size-xs);
      min-width: var(--icon-size-xs);
    }
    
    .breadcrumb-separator {
      font-size: var(--icon-size-xs);
      width: var(--icon-size-xs);
      height: var(--icon-size-xs);
      margin: 0 var(--spacing-2xs);
    }
  }
}

// ===== BREADCRUMB STYLE VARIANTS =====
// Alternative breadcrumb styling options - apply to .breadcrumb-container

// Minimal Style - Clean and subtle













// Ultra Dark Style - Maximum subtlety, nearly invisible
.breadcrumb-container.breadcrumb-ultra-dark {
  opacity: 0.4;
  margin-bottom: 2px;
  
  .breadcrumb-link,
  .breadcrumb-current {
    padding: 1px 4px;
    font-size: 9px; // Extremely small font
    font-weight: var(--font-weight-light);
    color: #212121; // Very dark gray, nearly black
    text-transform: none;
    letter-spacing: 0;
    border: none;
    background: none;
    
    &:hover {
      color: #000000; // Pure black on hover
      background: none;
      transform: none;
      box-shadow: none;
      
    }
  }
  
  .breadcrumb-current {
    color: #000000; // Pure black for current item
    font-weight: var(--font-weight-normal);
  }
  
  .breadcrumb-icon {
    font-size: 8px;
    width: 8px;
    height: 8px;

  }
  
  .breadcrumb-separator {
    color: #424242; // Dark separator
    
    font-size: 8px;
    width: 8px;
    height: 8px;
    margin: 0 1px;
  }
  
  .breadcrumb-list {
    gap: 1px;
  }
}

// ===== DYNAMIC MENU SYSTEM STYLES =====
// Global styles for dynamic navigation menu system

.menu-badge,
.action-badge {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 12px;
  margin-left: var(--spacing-xs);
  line-height: 1;
  min-width: 16px;
  text-align: center;
  
  &.badge-primary {
    background-color: #1976d2;
    color: #ffffff;
  }
  
  &.badge-accent {
    background-color: #0277bd;
    color: #ffffff;
  }
  
  &.badge-warn {
    background-color: #d32f2f;
    color: #ffffff;
  }
}

.action-badge {
  position: absolute;
  top: 4px;
  right: 4px;
  margin: 0;
  font-size: 10px;
  font-weight: 600;
  padding: 1px 5px;
  border-radius: 10px;
  line-height: 1.4;
  min-width: 14px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  z-index: 10;
}

// Apply tab theme globally
@include tabs-theme.windows-forms-tabs-responsive();


