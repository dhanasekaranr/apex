// Button Mixins
@mixin button-compact($height: 32px) {
  min-width: 80px;
  height: $height;
  font-size: var(--font-size-sm);
  
  mat-icon {
    margin-right: var(--spacing-xs);
    font-size: var(--icon-size-xs);
    width: var(--icon-size-xs);
    height: var(--icon-size-xs);
  }
}

@mixin button-primary {
  background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
  color: var(--white);
}

@mixin button-secondary {
  background: var(--gray-100);
  color: var(--text-primary);
  border: var(--border-width-thin) solid var(--border-light);
}

// Layout Mixins
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@mixin flex-column {
  display: flex;
  flex-direction: column;
}

// Two Column Layout
@mixin two-column-layout($gap: 16px, $breakpoint: 1024px) {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: $gap;
  
  @media (max-width: $breakpoint) {
    grid-template-columns: 1fr;
    gap: calc($gap * 0.75);
  }
}

// Responsive Container - Enhanced for uniform full-width layouts
@mixin responsive-container($max-width: none, $padding: true) {
  width: 100%;
  
  @if $max-width != none {
    max-width: $max-width;
    margin: 0 auto;
  }
  
  @if $padding {
    padding: var(--container-padding);
    
    @media (max-width: 768px) {
      padding: calc(var(--container-padding) * 0.75);
    }
    
    @media (max-width: 480px) {
      padding: calc(var(--container-padding) * 0.5);
    }
  }
}

// Full Width Container - No max-width constraints, uses 100% of available space
@mixin full-width-container($padding: true) {
  @include responsive-container(none, $padding);
}

// Content Grid - Enhanced for responsive layouts
@mixin content-grid($min-width: 300px, $gap: var(--spacing-lg), $columns: auto-fit) {
  display: grid;
  grid-template-columns: repeat($columns, minmax($min-width, 1fr));
  gap: $gap;
  width: 100%;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
    gap: calc(#{$gap} * 0.75);
  }
}

// Action Bar - For consistent button layouts
@mixin action-bar($justify: flex-start, $gap: var(--spacing-md)) {
  display: flex;
  justify-content: $justify;
  align-items: center;
  gap: $gap;
  width: 100%;
  margin-top: var(--spacing-lg);
  padding-top: var(--spacing-md);
  border-top: 1px solid var(--border-light);

  @media (max-width: 480px) {
    flex-direction: column;
    align-items: stretch;
    
    button {
      width: 100%;
    }
  }
}

// Info Grid - For key-value displays
@mixin info-grid($gap: var(--spacing-sm)) {
  display: grid;
  grid-template-columns: 1fr;
  gap: $gap;

  .info-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-xs) 0;
    border-bottom: 1px solid var(--border-light);

    &:last-child {
      border-bottom: none;
    }

    .info-label {
      font-weight: var(--font-weight-medium);
      color: var(--text-secondary);
    }

    .info-value {
      color: var(--text-primary);
      text-align: right;
    }
  }
}

// Two-Panel Layout - Responsive and reusable for data management interfaces
@mixin two-panel-layout($gap: var(--spacing-lg), $left-width: 1fr, $right-width: 2fr, $container-width: 96%) {
  .two-panel-container {
    display: grid;
    grid-template-columns: $left-width $right-width;
    gap: $gap;
    width: $container-width;
    max-width: $container-width;
    margin: 0 auto;
    height: 100%;
    min-height: 500px;
    
    // Earlier breakpoint for better responsiveness
    @media (max-width: 1024px) {
      grid-template-columns: 1fr;
      height: auto;
      min-height: auto;
      gap: calc(#{$gap} * 0.75);
      width: 95%;
    }
    
    // Mobile breakpoint
    @media (max-width: 768px) {
      width: 100%;
      gap: var(--spacing-md);
    }
    
    .left-panel,
    .right-panel {
      overflow: hidden;
      min-width: 0; // Prevent overflow
      
      .content-card {
        height: 100%;
        display: flex;
        flex-direction: column;
        
        mat-card-content {
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          padding: var(--spacing-lg) !important;
        }
      }
    }
    
    // Left panel - typically for lists/navigation
    .left-panel {
      &.data-list-panel {
        @include data-list-styling();
        
        .search-field {
          width: 100%;
          margin-bottom: var(--spacing-md);
        }
        
        .data-list {
          flex: 1;
          overflow-y: auto;
          padding: 0;
          
          mat-list-item {
            border-bottom: 1px solid var(--border-light);
            cursor: pointer;
            transition: background-color 0.2s ease;
            
            &:hover {
              background-color: var(--background-hover);
            }
            
            &.selected {
              background-color: var(--primary-container);
              color: var(--on-primary-container);
            }
            
            .data-category {
              font-size: var(--font-size-xs);
              color: var(--primary-color);
              font-weight: var(--font-weight-medium);
              padding: 2px 8px;
              background-color: var(--primary-container);
              border-radius: var(--border-radius-xl);
            }
          }
        }
      }
    }
    
    // Right panel - typically for details/editing
    .right-panel {
      &.data-details-panel {
        .data-info {
          background-color: var(--background-secondary);
          padding: var(--spacing-md);
          border-radius: var(--border-radius-md);
          margin-bottom: var(--spacing-lg);
          
          .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--spacing-xs);
            
            &:last-child {
              margin-bottom: 0;
            }
            
            .info-label {
              font-weight: var(--font-weight-medium);
              color: var(--text-secondary);
            }
            
            .info-value {
              font-weight: var(--font-weight-semibold);
              color: var(--text-primary);
            }
          }
        }
        
        .action-buttons {
          display: flex;
          gap: var(--spacing-md);
          margin-bottom: var(--spacing-lg);
          flex-wrap: wrap;
          
          @media (max-width: 480px) {
            flex-direction: column;
            
            button {
              width: 100%;
            }
          }
          
          button {
            mat-icon {
              margin-right: var(--spacing-xs);
            }
          }
        }
        
        .data-table-container {
          flex: 1;
          overflow: hidden;
          border: 1px solid var(--border-light);
          border-radius: var(--border-radius-md);
          width: 100%;
          
          .data-table {
            width: 100%;
            min-width: 100%;
            
            .table-input {
              width: 100%;
              margin: 0;
              
              .mat-mdc-form-field-wrapper {
                padding-bottom: 0;
              }
              
              .mat-mdc-text-field-wrapper {
                padding: 8px 12px;
              }
            }
            
            th.mat-mdc-header-cell {
              background-color: var(--background-secondary);
              font-weight: var(--font-weight-semibold);
              color: var(--text-primary);
              padding: var(--spacing-sm) var(--spacing-md);
            }
            
            td.mat-mdc-cell {
              padding: var(--spacing-xs) var(--spacing-md);
              border-bottom: 1px solid var(--border-light);
              
              &:last-child {
                text-align: center;
              }
            }
            
            tr.mat-mdc-row {
              &:hover {
                background-color: var(--background-hover);
              }
            }
            
            // Responsive column widths
            .mat-column-key {
              width: 18%;
              min-width: 100px;
            }
            
            .mat-column-value {
              width: 22%;
              min-width: 120px;
            }
            
            .mat-column-description {
              width: 40%;
              min-width: 150px;
            }
            
            .mat-column-isActive {
              width: 12%;
              min-width: 80px;
              text-align: center;
            }
            
            .mat-column-actions {
              width: 8%;
              min-width: 60px;
              text-align: center;
            }
            
            @media (max-width: 768px) {
              .mat-column-description {
                width: 35%;
                min-width: 120px;
              }
              
              .mat-column-key,
              .mat-column-value {
                width: 20%;
                min-width: 80px;
              }
            }
          }
        }
        
        .empty-state {
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          
          .empty-content {
            text-align: center;
            color: var(--text-secondary);
            
            .empty-icon {
              font-size: 4rem;
              width: 4rem;
              height: 4rem;
              margin-bottom: var(--spacing-md);
              color: var(--text-disabled);
            }
            
            h3 {
              margin: 0 0 var(--spacing-sm) 0;
              color: var(--text-primary);
            }
            
            p {
              margin: 0;
              max-width: 300px;
            }
          }
        }
      }
    }
    
    // Responsive design with better breakpoints
    @media (max-width: 1024px) {
      .left-panel.data-list-panel {
        .content-card {
          height: auto;
          margin-bottom: var(--spacing-lg);
        }
      }
      
      .right-panel.data-details-panel {
        .data-table-container {
          overflow-x: auto;
          
          .data-table {
            min-width: 600px;
          }
        }
      }
    }
    
    // Mobile responsiveness
    @media (max-width: 768px) {
      .left-panel.data-list-panel {
        .content-card {
          height: auto;
          margin-bottom: var(--spacing-lg);
        }
      }
      
      .right-panel.data-details-panel {
        .data-table-container {
          overflow-x: auto;
          
          .data-table {
            min-width: 600px;
          }
        }
      }
    }
  }
}

// Lookup Management Layout - DEPRECATED: Use two-panel-layout mixin instead
// This is kept for backward compatibility
@mixin lookup-management-layout($gap: var(--spacing-lg)) {
  @include two-panel-layout(1fr, 2fr, $gap);
}

// Two-Panel Layout - Responsive side-by-side layout with equal heights
@mixin two-panel-layout($left-width: 1fr, $right-width: 2fr, $gap: var(--spacing-lg), $breakpoint: 1024px) {
  display: grid;
  grid-template-columns: $left-width $right-width;
  gap: $gap;
  width: 90%; // Use 90% to prevent edge truncation
  max-width: 100%;
  margin: 0 auto; // Center the container
  align-items: start; // Align items to start for equal height behavior
  
  // Tablet breakpoint - panels stack vertically
  @media (max-width: $breakpoint) {
    grid-template-columns: 1fr;
    width: 95%; // Slightly more width on tablet
    gap: calc(#{$gap} * 0.75);
  }
  
  // Mobile breakpoint - full width
  @media (max-width: 768px) {
    width: 100%;
    gap: var(--spacing-md);
  }
  
  .left-panel,
  .right-panel {
    width: 100%;
    height: 100%;
    min-height: 0; // Important for proper grid behavior
    display: flex;
    flex-direction: column;
    
    .content-card {
      height: 100%;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      
      mat-card-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        padding: var(--spacing-lg) !important;
      }
    }
  }
  
  // Left panel specific styles
  .left-panel {
    .search-field {
      width: 100%;
      margin-bottom: var(--spacing-md);
      flex-shrink: 0;
    }
    
    .data-list {
      flex: 1;
      overflow-y: auto;
      padding: 0;
      
      mat-list-item {
        border-bottom: 1px solid var(--border-light);
        cursor: pointer;
        transition: background-color 0.2s ease;
        
        &:hover {
          background-color: var(--background-hover);
        }
        
        &.selected {
          background-color: var(--primary-container);
          color: var(--on-primary-container);
        }
        
        .data-category {
          font-size: var(--font-size-xs);
          color: var(--primary-color);
          font-weight: var(--font-weight-medium);
          padding: 2px 8px;
          background-color: var(--primary-container);
          border-radius: var(--border-radius-xl);
        }
      }
    }
  }
  
  // Right panel specific styles
  .right-panel {
    .data-info {
      background-color: var(--background-secondary);
      padding: var(--spacing-md);
      border-radius: var(--border-radius-md);
      margin-bottom: var(--spacing-lg);
      flex-shrink: 0;
      
      .info-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: var(--spacing-xs);
        
        &:last-child {
          margin-bottom: 0;
        }
        
        .info-label {
          font-weight: var(--font-weight-medium);
          color: var(--text-secondary);
        }
        
        .info-value {
          font-weight: var(--font-weight-semibold);
          color: var(--text-primary);
        }
      }
    }
    
    .action-buttons {
      display: flex;
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-lg);
      flex-shrink: 0;
      
      button {
        mat-icon {
          margin-right: var(--spacing-xs);
        }
      }
    }
    
    .data-table-container {
      flex: 1;
      overflow: auto;
      border: 1px solid var(--border-light);
      border-radius: var(--border-radius-md);
      width: 100%;
      min-height: 0; // Important for proper flex behavior
      
      .data-table {
        width: 100%;
        min-width: 100%;
        
        .table-input {
          width: 100%;
          margin: 0;
          
          .mat-mdc-form-field-wrapper {
            padding-bottom: 0;
          }
          
          .mat-mdc-text-field-wrapper {
            padding: 8px 12px;
          }
        }
        
        th.mat-mdc-header-cell {
          background-color: var(--background-secondary);
          font-weight: var(--font-weight-semibold);
          color: var(--text-primary);
          padding: var(--spacing-sm) var(--spacing-md);
        }
        
        td.mat-mdc-cell {
          padding: var(--spacing-xs) var(--spacing-md);
          border-bottom: 1px solid var(--border-light);
          
          &:last-child {
            text-align: center;
          }
        }
        
        tr.mat-mdc-row {
          &:hover {
            background-color: var(--background-hover);
          }
        }
        
        // Responsive column widths
        .mat-column-key {
          width: 20%;
          min-width: 100px;
        }
        
        .mat-column-value {
          width: 25%;
          min-width: 120px;
        }
        
        .mat-column-description {
          width: 40%;
          min-width: 150px;
        }
        
        .mat-column-isActive {
          width: 10%;
          min-width: 80px;
          text-align: center;
        }
        
        .mat-column-actions {
          width: 5%;
          min-width: 60px;
          text-align: center;
        }
      }
    }
    
    .empty-state {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      
      .empty-content {
        text-align: center;
        color: var(--text-secondary);
        
        .empty-icon {
          font-size: 4rem;
          width: 4rem;
          height: 4rem;
          margin-bottom: var(--spacing-md);
          color: var(--text-disabled);
        }
        
        h3 {
          margin: 0 0 var(--spacing-sm) 0;
          color: var(--text-primary);
        }
        
        p {
          margin: 0;
          max-width: 300px;
        }
      }
    }
  }
  
  // Mobile responsiveness
  @media (max-width: $breakpoint) {
    .left-panel {
      .content-card {
        height: auto;
        margin-bottom: var(--spacing-lg);
      }
    }
    
    .right-panel {
      .data-table-container {
        overflow-x: auto;
        
        .data-table {
          min-width: 600px;
        }
      }
    }
  }
}

// Data List Item Styling - For consistent list layouts
@mixin data-list-styling {
  .data-list {
    padding: 0;
    
    mat-list-item {
      border-bottom: 1px solid var(--border-light);
      cursor: pointer;
      transition: background-color 0.2s ease;
      min-height: 72px !important; // Ensure consistent height
      padding: var(--spacing-sm) var(--spacing-md) !important;
      
      &:hover {
        background-color: var(--background-hover);
      }
      
      &.selected {
        background-color: var(--primary-container);
        color: var(--on-primary-container);
        
        .data-category {
          background-color: rgba(255, 255, 255, 0.2);
          color: var(--white);
        }
      }
      
      // Fix alignment issues with list item content
      .mdc-list-item__content {
        display: flex !important;
        flex-direction: column !important;
        align-items: flex-start !important;
        justify-content: center !important;
        padding: 0 !important;
        margin: 0 !important;
        width: 100% !important;
      }
      
      // Ensure title and subtitle are properly aligned
      .mdc-list-item__primary-text,
      [matListItemTitle] {
        font-weight: var(--font-weight-medium) !important;
        color: var(--text-primary) !important;
        font-size: var(--font-size-md) !important;
        line-height: 1.4 !important;
        margin: 0 !important;
        padding: 0 !important;
        display: block !important;
        width: 100% !important;
      }
      
      .mdc-list-item__secondary-text,
      [matListItemLine] {
        color: var(--text-secondary) !important;
        font-size: var(--font-size-sm) !important;
        line-height: 1.3 !important;
        margin: 2px 0 0 0 !important;
        padding: 0 !important;
        display: block !important;
        width: 100% !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        white-space: nowrap !important;
      }
      
      // Category badge styling
      .data-category {
        position: absolute !important;
        top: var(--spacing-sm) !important;
        right: var(--spacing-md) !important;
        font-size: var(--font-size-xs) !important;
        color: var(--primary-color) !important;
        font-weight: var(--font-weight-medium) !important;
        padding: 4px 8px !important;
        background-color: var(--primary-container) !important;
        border-radius: var(--border-radius-xl) !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
      }
      
      // Override Material's default flex layout
      &.mat-mdc-list-item {
        display: flex !important;
        align-items: flex-start !important;
        position: relative !important;
        
        .mat-mdc-list-item-content {
          flex: 1 !important;
          display: flex !important;
          flex-direction: column !important;
          align-items: flex-start !important;
          justify-content: center !important;
          padding-right: 80px !important; // Space for category badge
        }
      }
    }
  }
}

// Equal Height Container - For maintaining equal heights between cards
@mixin equal-height-container($min-height: 500px) {
  display: flex;
  flex-direction: column;
  min-height: $min-height;
  
  .content-card {
    flex: 1;
    display: flex;
    flex-direction: column;
    
    mat-card-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
  }
}

// Data details panel specific styling for maximum data visibility
.data-details-panel {
  .content-card {
    height: 100%;
    display: flex;
    flex-direction: column;
    
    // Compact header styling to match left panel
    mat-card-header {
      padding: var(--spacing-sm) var(--spacing-md) !important;
      min-height: 64px; // Match left panel header height
      background-color: var(--background-tertiary);
      border-bottom: 1px solid var(--border-light);
      
      .mat-mdc-card-title {
        font-size: var(--font-size-lg) !important;
        font-weight: var(--font-weight-medium) !important;
        margin-bottom: var(--spacing-xs) !important;
      }
      
      .mat-mdc-card-subtitle {
        font-size: var(--font-size-sm) !important;
        margin-bottom: 0 !important;
        opacity: 0.8;
      }
    }
    
    // Minimal padding for content area to maximize data space
    mat-card-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      padding: var(--spacing-xs) var(--spacing-sm) !important; // Minimal padding
      
      // Data info section with compact styling
      .data-info {
        background-color: var(--background-secondary);
        padding: var(--spacing-xs) var(--spacing-sm); // Reduced padding
        border-radius: var(--border-radius-sm);
        margin-bottom: var(--spacing-sm); // Reduced margin
        
        .info-row {
          display: flex;
          justify-content: space-between;
          margin-bottom: var(--spacing-xs);
          padding: 2px 0; // Minimal vertical padding
          
          &:last-child {
            margin-bottom: 0;
          }
          
          .info-label {
            font-weight: var(--font-weight-medium);
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
          }
          
          .info-value {
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            font-size: var(--font-size-sm);
          }
        }
      }
      
      // Compact action buttons
      .action-buttons {
        display: flex;
        gap: var(--spacing-sm); // Reduced gap
        margin-bottom: var(--spacing-sm); // Reduced margin
        
        button {
          height: 36px; // Compact button height
          min-width: 80px; // Compact width
          font-size: var(--font-size-sm);
          
          mat-icon {
            margin-right: var(--spacing-xs);
            font-size: 18px;
            width: 18px;
            height: 18px;
          }
        }
      }
      
      // Data table container with minimal padding
      .data-table-container {
        flex: 1;
        overflow: auto;
        border: 1px solid var(--border-light);
        border-radius: var(--border-radius-sm);
        width: 100%;
        margin: 0; // Remove any default margins
        
        .data-table {
          width: 100%;
          min-width: 100%;
          
          // Compact table styling
          .mat-mdc-header-row {
            height: 40px; // Compact header height
            background-color: var(--background-secondary);
          }
          
          .mat-mdc-row {
            height: 44px; // Compact row height
            
            &:hover {
              background-color: var(--background-hover);
            }
          }
          
          .mat-mdc-header-cell,
          .mat-mdc-cell {
            padding: var(--spacing-xs) var(--spacing-sm); // Minimal cell padding
            font-size: var(--font-size-sm);
          }
          
          .mat-mdc-header-cell {
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
          }
          
          // Compact form fields in table
          .table-input {
            width: 100%;
            margin: 0;
            
            .mat-mdc-form-field-wrapper {
              padding-bottom: 0;
            }
            
            .mat-mdc-text-field-wrapper {
              padding: 4px 8px; // Minimal input padding
            }
            
            .mat-mdc-form-field-infix {
              min-height: 28px; // Compact input height
            }
            
            input {
              font-size: var(--font-size-sm);
            }
          }
        }
      }
    }
  }
}
